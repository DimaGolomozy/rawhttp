<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    
    <meta name="description" content="RawHTTP - a HTTP library for the JVM">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:domain" content="https://renatoathaydes.github.io/rawhttp">
    
    <meta name="twitter:image" content="https://renatoathaydes.github.io/rawhttp/tn.png">
    <meta name="twitter:title" property="og:title" itemprop="title name" content="RawHTTP">
    <meta name="twitter:description" property="og:description" itemprop="description" content="RawHTTP - a HTTP library for the JVM">
    <meta name="og:type" content="website">
    <meta name="og:url" content="https://renatoathaydes.github.io/rawhttp">
    <meta name="og:image" itemprop="image primaryImageOfPage" content="https://renatoathaydes.github.io/rawhttp/tn.png">
    
    <title>RawHTTP</title>
    <link rel="shortcut icon" href="https://renatoathaydes.github.io/rawhttp/sam.ico" id="favicon">
    <link rel="stylesheet" href="https://renatoathaydes.github.io/rawhttp/css/style.css">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">
    
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    
    

</head>

</html>
<body><div class="wrap"><div class="section" id="title">HTTP Server</div><div class="section" id="content">

<h3 id="using-a-http-server">Using a HTTP server</h3>

<p>Even though you can write a simple HTTP server using only a <code>ServerSocket</code> and <code>RawHttp</code> to parse requests and
responses, RawHTTP also offers a simple server implementation that makes things easier:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> rawhttp.core.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> rawhttp.core.server.*<span style="color:#f92672">;</span>

RawHttpServer server <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TcpRawHttpServer<span style="color:#f92672">(</span>8086<span style="color:#f92672">);</span>
RawHttp http <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">();</span>

server<span style="color:#f92672">.</span><span style="color:#a6e22e">start</span><span style="color:#f92672">(</span>request <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
    RawHttpResponse<span style="color:#f92672">&lt;?&gt;</span> response <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseResponse</span><span style="color:#f92672">(...);</span>
    <span style="color:#66d9ef">return</span> Optional<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>response<span style="color:#f92672">);</span>
<span style="color:#f92672">});</span></code></pre></div>

<p>Stop the server once you don&rsquo;t need it anymore:</p>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">server<span style="color:#f92672">.</span><span style="color:#a6e22e">stop</span><span style="color:#f92672">();</span></code></pre></div></p>

<h3 id="configuring-a-http-server">Configuring a HTTP server</h3>

<p>As with the HTTP client, to configure a HTTP server, pass the options into the constructor.</p>

<p>An example implementation of <code>TcpRawHttpServer.TcpRawHttpServerOptions</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ExampleTcpRawHttpServerOptions</span> <span style="color:#66d9ef">implements</span> TcpRawHttpServer<span style="color:#f92672">.</span><span style="color:#a6e22e">TcpRawHttpServerOptions</span> <span style="color:#f92672">{</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> ServerSocket <span style="color:#a6e22e">getServerSocket</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ServerSocket<span style="color:#f92672">(</span>8080<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> RawHttp <span style="color:#a6e22e">getRawHttp</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> ExecutorService <span style="color:#a6e22e">getExecutorService</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> Executors<span style="color:#f92672">.</span><span style="color:#a6e22e">newCachedThreadPool</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Optional<span style="color:#f92672">&lt;</span>EagerHttpResponse<span style="color:#f92672">&lt;</span>Void<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">serverErrorResponse</span><span style="color:#f92672">(</span>RawHttpRequest request<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> Optional<span style="color:#f92672">.</span><span style="color:#a6e22e">empty</span><span style="color:#f92672">();</span> <span style="color:#75715e">// use the default 500 error response
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Optional<span style="color:#f92672">&lt;</span>EagerHttpResponse<span style="color:#f92672">&lt;</span>Void<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">notFoundResponse</span><span style="color:#f92672">(</span>RawHttpRequest request<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> Optional<span style="color:#f92672">.</span><span style="color:#a6e22e">empty</span><span style="color:#f92672">();</span> <span style="color:#75715e">// use the default 404 error response
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> Optional<span style="color:#f92672">&lt;</span>Supplier<span style="color:#f92672">&lt;</span>RawHttpHeaders<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">autoHeadersSupplier</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> statusCode<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// TODO add standard HTTP response headers, like &#34;Server&#34; and &#34;Date&#34;
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> Optional<span style="color:#f92672">.</span><span style="color:#a6e22e">empty</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> RawHttpResponse<span style="color:#f92672">&lt;</span>Void<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">onResponse</span><span style="color:#f92672">(</span>RawHttpRequest request<span style="color:#f92672">,</span> RawHttpResponse<span style="color:#f92672">&lt;</span>Void<span style="color:#f92672">&gt;</span> response<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// TODO this is a good place to log the request and response
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> response<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">close</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>

<p>The default options used by the server creates an unlimited, cached Thread pool to serve requests
and automatically inserts a <code>Server</code> and <code>Date</code> headers to all responses by implementing
the <code>autoHeadersSupplier()</code> method. If you provide your own options, this behaviour is overridden.</p>

<hr>

<p><a href="/rawhttp/docs">Index</a></p>
</div><div class="section bottom-menu"><hr/><p><a href="/rawhttp/in-5-minutes">RawHTTP in 5 minutes</a>


&#183; <a href="/rawhttp/docs">Documentation</a>
&#183; <a href="/rawhttp/rawhttp-modules">Modules</a>
&#183; <a href="/rawhttp/about">About</a>

&#183; <a href="https://renatoathaydes.github.io/rawhttp"></a></p></div><div class="section footer">RawHTTP - a HTTP library for the JVM</div></div></body>