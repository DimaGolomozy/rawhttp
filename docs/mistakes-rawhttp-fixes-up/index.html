<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    
    <meta name="description" content="Call me Sam, a theme for Hugo.">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:domain" content="https://renatoathaydes.github.io/rawhttp">
    
    <meta name="twitter:image" content="https://renatoathaydes.github.io/rawhttp/tn.png">
    <meta name="twitter:title" property="og:title" itemprop="title name" content="RawHTTP">
    <meta name="twitter:description" property="og:description" itemprop="description" content="Call me Sam, a theme for Hugo.">
    <meta name="og:type" content="website">
    <meta name="og:url" content="https://renatoathaydes.github.io/rawhttp">
    <meta name="og:image" itemprop="image primaryImageOfPage" content="https://renatoathaydes.github.io/rawhttp/tn.png">
    
    <title>RawHTTP</title>
    <link rel="shortcut icon" href="https://renatoathaydes.github.io/rawhttp/sam.ico" id="favicon">
    <link rel="stylesheet" href="https://renatoathaydes.github.io/rawhttp/css/style.css">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">
    
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    
    

</head>

</html>
<body><div class="wrap"><div class="section" id="title">Mistakes RawHttp fixes up</div><div class="section" id="content">

<p>By default, <code>RawHttp</code> will fix the following common mistakes when parsing a HTTP message:</p>

<h4 id="line-separators">Line separators</h4>

<p>According to <a href="https://tools.ietf.org/html/rfc7230#section-3">RFC-7230</a>, which defines the HTTP/1.1 message format,
line separators must be <code>CRLF</code>, or <code>\r\n</code>.</p>

<p>However, by default, <code>RawHttp</code> allows a simple <code>\n</code> to be used:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> rawhttp.core.*<span style="color:#f92672">;</span>

RawHttp http <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">();</span>
RawHttpRequest request <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseRequest</span><span style="color:#f92672">(</span>
    <span style="color:#e6db74">&#34;GET /hello HTTP/1.1\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Host: example.com&#34;</span><span style="color:#f92672">);</span></code></pre></div>

<h4 id="http-version">HTTP version</h4>

<p>For simplicity, the HTTP version can be omitted from HTTP messages, in which case <code>HTTP/1.1</code> is used:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> rawhttp.core.*<span style="color:#f92672">;</span>

RawHttp http <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">();</span>
RawHttpRequest request <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseRequest</span><span style="color:#f92672">(</span>
    <span style="color:#e6db74">&#34;GET /hello\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Host: example.com&#34;</span><span style="color:#f92672">);</span></code></pre></div>

<h4 id="host-header">Host header</h4>

<p>The <code>Host</code> header is mandatory in HTTP requests. But <code>RawHttp</code> allows specifying a full URL in the method-line,
which makes it automatically add a <code>Host</code> header to the request in case it&rsquo;s missing:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> rawhttp.core.*<span style="color:#f92672">;</span>

RawHttp http <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">();</span>
RawHttpRequest request <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseRequest</span><span style="color:#f92672">(</span>
    <span style="color:#e6db74">&#34;GET http://example.com/hello&#34;</span><span style="color:#f92672">);</span></code></pre></div>

<h4 id="leading-new-line-in-message">Leading new-line in message</h4>

<p><a href="https://tools.ietf.org/html/rfc7230#section-3.5">RFC-7230</a> recommends that HTTP message receivers ignore a leading
new-line for the sake of robustness and historical reasons.</p>

<p><code>RawHttp</code> will do that by default:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> rawhttp.core.*<span style="color:#f92672">;</span>

RawHttp http <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">();</span>
RawHttpRequest request <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseRequest</span><span style="color:#f92672">(</span>
    <span style="color:#75715e">// this is ok!
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;\nGET http://example.com/hello&#34;</span><span style="color:#f92672">);</span></code></pre></div>

<hr>

<h3 id="configuring-rawhttp">Configuring <code>RawHttp</code></h3>

<p>The <code>RawHttp</code> class has a constructor which takes a <code>RawHttpOptions</code> instance, allowing for all of the fix-ups
mentioned above to be turned off:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> rawhttp.core.*<span style="color:#f92672">;</span>

RawHttp strictHttp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">(</span>RawHttpOptions<span style="color:#f92672">.</span><span style="color:#a6e22e">newBuilder</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">doNotAllowNewLineWithoutReturn</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">doNotInsertHostHeaderIfMissing</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">doNotInsertHttpVersionIfMissing</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">doNotIgnoreLeadingEmptyLine</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">());</span></code></pre></div>

<hr>

<p><a href="/rawhttp/docs">Index</a> <a href="/rawhttp/docs/http-client">Next: HTTP Client</a></p>
</div><div class="section bottom-menu"><hr/><p><a href="/rawhttp/in-5-minutes">RawHTTP in 5 minutes</a>


&#183; <a href="/rawhttp/docs">Documentation</a>
&#183; <a href="/rawhttp/rawhttp-modules">Modules</a>
&#183; <a href="/rawhttp/about">About</a>

&#183; <a href="https://renatoathaydes.github.io/rawhttp"></a></p></div><div class="section footer">RawHTTP - a HTTP library for the JVM</div></div></body>