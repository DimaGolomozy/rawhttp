<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    
    <meta name="description" content="Call me Sam, a theme for Hugo.">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:domain" content="https://renatoathaydes.github.io/rawhttp">
    
    <meta name="twitter:image" content="https://renatoathaydes.github.io/rawhttp/tn.png">
    <meta name="twitter:title" property="og:title" itemprop="title name" content="RawHTTP">
    <meta name="twitter:description" property="og:description" itemprop="description" content="Call me Sam, a theme for Hugo.">
    <meta name="og:type" content="website">
    <meta name="og:url" content="https://renatoathaydes.github.io/rawhttp">
    <meta name="og:image" itemprop="image primaryImageOfPage" content="https://renatoathaydes.github.io/rawhttp/tn.png">
    
    <title>RawHTTP</title>
    <link rel="shortcut icon" href="https://renatoathaydes.github.io/rawhttp/sam.ico" id="favicon">
    <link rel="stylesheet" href="https://renatoathaydes.github.io/rawhttp/css/style.css">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">
    
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    
    

</head>

</html>
<body><div class="wrap"><div class="section" id="title">Low level API</div><div class="section" id="content">

<h3 id="send-a-get-request">Send a GET request</h3>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> rawhttp.core.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.net.Socket<span style="color:#f92672">;</span>

RawHttp http <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">();</span>
RawHttpRequest request <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseRequest</span><span style="color:#f92672">(</span>
    <span style="color:#e6db74">&#34;GET / HTTP/1.1\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Host: headers.jsontest.com\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;User-Agent: RawHTTP\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Accept: application/json&#34;</span><span style="color:#f92672">);</span>

Socket socket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Socket<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;headers.jsontest.com&#34;</span><span style="color:#f92672">,</span> 80<span style="color:#f92672">);</span>
request<span style="color:#f92672">.</span><span style="color:#a6e22e">writeTo</span><span style="color:#f92672">(</span>socket<span style="color:#f92672">.</span><span style="color:#a6e22e">getOutputStream</span><span style="color:#f92672">());</span></code></pre></div>

<h3 id="send-a-post-request-with-a-body">Send a POST request with a body</h3>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> rawhttp.core.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.net.Socket<span style="color:#f92672">;</span>

String jsonBody <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;{ \&#34;hello\&#34;: true, \&#34;raw_http\&#34;: \&#34;2.0\&#34; }&#34;</span><span style="color:#f92672">;</span>
RawHttp http <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">();</span>
RawHttpRequest request <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseRequest</span><span style="color:#f92672">(</span>
    <span style="color:#e6db74">&#34;POST /post HTTP/1.1\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Host: httpbin.org\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;User-Agent: RawHTTP\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Content-Length: &#34;</span> <span style="color:#f92672">+</span> jsonBody<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Content-Type: application/json\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Accept: application/json\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;\r\n&#34;</span> <span style="color:#f92672">+</span>
    jsonBody<span style="color:#f92672">);</span>

Socket socket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Socket<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;httpbin.org&#34;</span><span style="color:#f92672">,</span> 80<span style="color:#f92672">);</span>
request<span style="color:#f92672">.</span><span style="color:#a6e22e">writeTo</span><span style="color:#f92672">(</span>socket<span style="color:#f92672">.</span><span style="color:#a6e22e">getOutputStream</span><span style="color:#f92672">());</span></code></pre></div></p>

<h3 id="read-a-response">Read a response</h3>

<p>&hellip; continues from the previous example:</p>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">RawHttpResponse<span style="color:#f92672">&lt;?&gt;</span> response <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseResponse</span><span style="color:#f92672">(</span>socket<span style="color:#f92672">.</span><span style="color:#a6e22e">getInputStream</span><span style="color:#f92672">()).</span><span style="color:#a6e22e">eagerly</span><span style="color:#f92672">();</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;RESPONSE:\n&#34;</span> <span style="color:#f92672">+</span> response<span style="color:#f92672">);</span>

assertEquals<span style="color:#f92672">(</span>200<span style="color:#f92672">,</span> response<span style="color:#f92672">.</span><span style="color:#a6e22e">getStatusCode</span><span style="color:#f92672">());</span>
assertTrue<span style="color:#f92672">(</span>response<span style="color:#f92672">.</span><span style="color:#a6e22e">getBody</span><span style="color:#f92672">().</span><span style="color:#a6e22e">isPresent</span><span style="color:#f92672">());</span>

String textBody <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span><span style="color:#a6e22e">getBody</span><span style="color:#f92672">().</span><span style="color:#a6e22e">get</span><span style="color:#f92672">().</span><span style="color:#a6e22e">decodeBodyToString</span><span style="color:#f92672">(</span>UTF_8<span style="color:#f92672">);</span>
assertTrue<span style="color:#f92672">(</span>textBody<span style="color:#f92672">.</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span>jsonBody<span style="color:#f92672">.</span><span style="color:#a6e22e">replaceAll</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">)));</span></code></pre></div></p>

<h3 id="check-headers-in-both-request-or-response">Check headers (in both request or response)</h3>

<p>&hellip; continues from the previous examples:</p>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">assertEquals<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;application/json&#34;</span><span style="color:#f92672">,</span>
    request<span style="color:#f92672">.</span><span style="color:#a6e22e">getHeaders</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getFirst</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Accept&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">orElse</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">));</span>

assertEquals<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;application/json&#34;</span><span style="color:#f92672">,</span>
    response<span style="color:#f92672">.</span><span style="color:#a6e22e">getHeaders</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getFirst</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">orElse</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">));</span>

assertEquals<span style="color:#f92672">(</span>asList<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;application/json&#34;</span><span style="color:#f92672">),</span>
    response<span style="color:#f92672">.</span><span style="color:#a6e22e">getHeaders</span><span style="color:#f92672">().</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">));</span>

assertEquals<span style="color:#f92672">(</span>asList<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Host&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;User-Agent&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Content-Length&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Accept&#34;</span><span style="color:#f92672">),</span>
    request<span style="color:#f92672">.</span><span style="color:#a6e22e">getHeaders</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getHeaderNames</span><span style="color:#f92672">());</span></code></pre></div></p>

<h3 id="listen-for-http-requests-as-a-server">Listen for HTTP requests (as a server)</h3>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> rawhttp.core.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.net.ServerSocket<span style="color:#f92672">;</span>

ServerSocket serverSocket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ServerSocket<span style="color:#f92672">(</span>8082<span style="color:#f92672">);</span>
RawHttp http <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RawHttp<span style="color:#f92672">();</span>
Socket client <span style="color:#f92672">=</span> serverSocket<span style="color:#f92672">.</span><span style="color:#a6e22e">accept</span><span style="color:#f92672">();</span>
RawHttpRequest request <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseRequest</span><span style="color:#f92672">(</span>client<span style="color:#f92672">.</span><span style="color:#a6e22e">getInputStream</span><span style="color:#f92672">());</span></code></pre></div></p>

<h3 id="respond-to-a-http-request">Respond to a HTTP request</h3>

<p>&hellip; continues from the previous example:</p>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> java.time.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import static</span> java.time.format.DateTimeFormatter.RFC_1123_DATE_TIME<span style="color:#f92672">;</span>

String body <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello RawHTTP!&#34;</span><span style="color:#f92672">;</span>
String dateString <span style="color:#f92672">=</span> RFC_1123_DATE_TIME<span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span>ZonedDateTime<span style="color:#f92672">.</span><span style="color:#a6e22e">now</span><span style="color:#f92672">(</span>ZoneOffset<span style="color:#f92672">.</span><span style="color:#a6e22e">UTC</span><span style="color:#f92672">));</span>
RawHttpResponse<span style="color:#f92672">&lt;?&gt;</span> response <span style="color:#f92672">=</span> http<span style="color:#f92672">.</span><span style="color:#a6e22e">parseResponse</span><span style="color:#f92672">(</span>
    <span style="color:#e6db74">&#34;HTTP/1.1 200 OK\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Content-Type: plain/text\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Content-Length: &#34;</span> <span style="color:#f92672">+</span> body<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Server: RawHTTP\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;Date: &#34;</span> <span style="color:#f92672">+</span> dateString <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\r\n&#34;</span> <span style="color:#f92672">+</span>
    <span style="color:#e6db74">&#34;\r\n&#34;</span> <span style="color:#f92672">+</span>
    body<span style="color:#f92672">);</span>
response<span style="color:#f92672">.</span><span style="color:#a6e22e">writeTo</span><span style="color:#f92672">(</span>client<span style="color:#f92672">.</span><span style="color:#a6e22e">getOutputStream</span><span style="color:#f92672">());</span></code></pre></div></p>

<hr>

<p><a href="/rawhttp/docs">Index</a> <a href="/rawhttp/docs/working-with-http-body">Next: Working with message body</a></p>
</div><div class="section bottom-menu"><hr/><p><a href="/rawhttp/rawhttp">RawHTTP in 5 minutes</a>


&#183; <a href="/rawhttp/docs">Documentation</a>
&#183; <a href="/rawhttp/rawhttp-modules">Modules</a>
&#183; <a href="/rawhttp/about">About</a>

&#183; <a href="https://renatoathaydes.github.io/rawhttp"></a></p></div><div class="section footer">RawHTTP - a HTTP library for the JVM</div></div></body>